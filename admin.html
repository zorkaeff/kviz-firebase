<h3>Detaljan pregled odgovora</h3>
<table id="answersTable">
  <thead>
    <tr>
      <th>Krug</th>
      <th>Pitanje</th>
      <th>Igraƒç</th>
      <th>Odgovor</th>
      <th>Bodovi</th>
      <th>Vrijeme (s)</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<script>
function updateAnswerDetails() {
  const tbody = document.querySelector('#answersTable tbody');
  tbody.innerHTML = "";
  
  db.ref('answers').once('value').then(allSnap=>{
    allSnap.forEach(roundSnap=>{
      roundSnap.forEach(qSnap=>{
        const qKey = qSnap.key; // npr. 1_3
        qSnap.forEach(playerSnap=>{
          const data = playerSnap.val();
          const deltaRef = db.ref(`results/${playerSnap.key}`);
          
          deltaRef.once('value').then(resSnap=>{
            const points = resSnap.val()?.points || 0;
            const tr = document.createElement('tr');
            const roundNum = roundSnap.key.split('_')[0] || roundSnap.key;
            tr.innerHTML = `<td>${roundNum}</td>
                            <td>${qKey}</td>
                            <td>${playerSnap.key}</td>
                            <td>${data.choice}</td>
                            <td>${points}</td>
                            <td>${Math.floor((data.time || 0)/1000)}</td>`;
            tbody.appendChild(tr);
          });
        });
      });
    });
  });
}

// Update svakih 2 sekunde
setInterval(updateAnswerDetails, 2000);
</script>
