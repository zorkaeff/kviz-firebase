<!DOCTYPE html>
<html lang="hr">
<head>
<meta charset="UTF-8" />
<title>Kviz</title>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body { font-family: Arial; background:#111; color:white; text-align:center; }
button { margin:6px; padding:12px 18px; font-size:18px; cursor:pointer; }
.hidden { display:none; }
.timer { font-size:32px; margin:10px; }
</style>
</head>

<body>

<h2>Kviz pitanje</h2>
<div class="timer" id="timer">20</div>

<!-- FAZA 1 -->
<div id="mainPhase">
  <button onclick="answerMain('A!')">A!</button>
  <button onclick="answerMain('A.')">A.</button>
  <button onclick="answerMain('B!')">B!</button>
  <button onclick="answerMain('B.')">B.</button>
  <button onclick="answerMain('C!')">C!</button>
  <button onclick="answerMain('C.')">C.</button>
  <button onclick="answerMain('D!')">D!</button>
  <button onclick="answerMain('D.')">D.</button>
  <button onclick="answerMain('?')">?</button>
</div>

<!-- FAZA 2 -->
<div id="lukavacPhase" class="hidden">
  <h3>Lukavac â€“ 10 sekundi</h3>
  <button onclick="answerLukavac('A')">A?</button>
  <button onclick="answerLukavac('B')">B?</button>
  <button onclick="answerLukavac('C')">C?</button>
  <button onclick="answerLukavac('D')">D?</button>
</div>

<canvas id="chart" class="hidden"></canvas>

<script>
/* ðŸ”¥ KONFIGURACIJA KVIZA */
const correctAnswer = "C";
const player = localStorage.getItem("player") || prompt("Ime igraÄa:");
localStorage.setItem("player", player);

/* ðŸ”¥ FIREBASE CONFIG */
const firebaseConfig = {
  apiKey: "AIzaSyB5jeu860fNmmysc51wcb5fej7Bz_6gW-Q",
  authDomain: "hpddd-b9bef.firebaseapp.com",
  databaseURL: "https://hpddd-b9bef-default-rtdb.europe-west1.firebasedatabase.app",
  projectId: "hpddd-b9bef",
  storageBucket: "hpddd-b9bef.appspot.com",
  messagingSenderId: "520105963434",
  appId: "1:520105963434:web:5b25d1f9f28512ae1145d3"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

/* ðŸ”¢ BODOVI */
function calcMain(choice) {
  if (choice === "?") return null;
  const a = choice[0], t = choice[1];
  if (a !== correctAnswer) return t === "!" ? -100 : 0;
  return t === "!" ? 100 : 50;
}
function calcLukavac(choice) {
  return choice === correctAnswer ? 50 : -50;
}

/* â± FAZA 1 */
let time = 20;
let mainAnswered = false;
let usedLukavac = false;

const interval = setInterval(() => {
  document.getElementById("timer").innerText = time;
  time--;
  if (time < 0) endMainPhase();
}, 1000);

function answerMain(choice) {
  if (mainAnswered) return;
  mainAnswered = true;
